{"version":3,"sources":["uni-app:///main.js","webpack:///E:/yisheng/trunk/pages/index/auth.vue?db63","webpack:///E:/yisheng/trunk/pages/index/auth.vue?b886","webpack:///E:/yisheng/trunk/pages/index/auth.vue?1e20","webpack:///E:/yisheng/trunk/pages/index/auth.vue?32ba","uni-app:///pages/index/auth.vue","webpack:///E:/yisheng/trunk/pages/index/auth.vue?127e"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":"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","file":"pages/index/auth.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/auth.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./auth.vue?vue&type=template&id=731bdbfd&scoped=true&\"\nvar renderjs\nimport script from \"./auth.vue?vue&type=script&lang=js&\"\nexport * from \"./auth.vue?vue&type=script&lang=js&\"\nimport style0 from \"./auth.vue?vue&type=style&index=0&id=731bdbfd&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"731bdbfd\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"E:/yisheng/trunk/pages/index/auth.vue\"\nexport default component.exports","export * from \"-!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./auth.vue?vue&type=template&id=731bdbfd&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./auth.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./auth.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!--我的明我-->\r\n\t<view class=\"cont\" @click=\"clickHealth\">\r\n\t\t<view class=\"mine_top\" style=\"background:url('https://coffer.bainuo.cn/mdt-pub/mine_bg@2x.png') no-repeat top center; background-size: 100% 100%; background-position: 0 -4rpx;;\">\r\n\t\t\t<view class=\"user-section\">\r\n\t\t\t\t<view class=\"cu-avatar\" style=\"line-height: 1.5;\">\r\n\t\t\t\t\t<image src=\"../../static/image/fuhao@2x.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"color_fff\">\n\t\t\t\t\t点击登录\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"items\">\r\n\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t<view class=\"text\">--</view>\r\n\t\t\t\t\t<view class=\"text\">报告数</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t<view class=\"text\">--</view>\r\n\t\t\t\t\t<view class=\"text\">加入服务站数</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t<view class=\"text\">--</view>\r\n\t\t\t\t\t<view class=\"text\">收藏数</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t  \r\n\t\t<view class=\"waiper\">\r\n\t\t\t<view class=\"title\">\r\n\t\t\t\t数字健康档案<text style=\"font-size:28rpx;\">（全周期生命账户）</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"disinline items\" @tap=\"clickReport('advisory_report','驻站医生报告',1)\">\r\n\t\t\t\t<view class=\"iimg\"><image src=\"../../static/image/icons@2x(5).png\" style=\"width:50rpx; height:60rpx;\"></image></view>\r\n\t\t\t\t<view>驻站医生报告</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"disinline items\" @tap=\"clickReport('TONGUE_QUES,QUES,TONGUE,face_check','智能医生报告',1)\">\r\n\t\t\t\t<view class=\"iimg\"><image src=\"../../static/image/icons@2x(3).png\" style=\"width:60rpx; height:52rpx;\"></image></view>\r\n\t\t\t\t<view>智能医生报告</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"disinline items\" @tap=\"clickHealth\">\r\n\t\t\t\t<view class=\"iimg\"><image src=\"../../static/image/icons@2x(4).png\" style=\"width:46rpx; height:54rpx;\"></image></view>\r\n\t\t\t\t<view>健康风险报告</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"waiper\">\r\n\r\n\t\t\t<view class=\"disinline items\" @tap=\"navigateTo('/pages/service-record/service-record')\">\r\n\t\t\t\t<view class=\"iimg\"><image src=\"../../static/image/icons@2x(1).png\" style=\"width:60rpx; height:56rpx;\"></image></view>\r\n\t\t\t\t<view>服务记录</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"disinline items\" @tap=\"navigateTo('/pages/serverStation/stationList')\">\r\n\t\t\t\t<view class=\"iimg\"><image src=\"../../static/image/icons@2x(2).png\" style=\"width:60rpx; height:54rpx;\"></image></view>\r\n\t\t\t\t<view>已加入服务站</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"disinline items\" @tap=\"navigateTo('/pages/mine/collectList')\">\r\n\t\t\t\t<view class=\"iimg\"><image src=\"../../static/image/icons@2x(6).png\" style=\"width:60rpx; height:56rpx;\"></image></view>\r\n\t\t\t\t<view>收藏</view>\r\n\t\t\t</view>\r\n\t\t</view>\n        <view v-if=\"login != 0\" class=\"cpt-mask\"></view>\n        <view v-if=\"login != 0\" class=\"calendarBox\">\n            <image class=\"logoImage\" src=\"../../static/image/logo_mw.png\" mode=\"\"></image>\n            <image v-if=\"login == 1\" style=\"width: 313upx; height: 313upx; margin-top: 17upx;\" src=\"../../static/image/img_sy_dl.png\" mode=\"\"></image>\n            <image v-if=\"login == 2\" style=\"width: 121upx; height: 250upx; margin-top: 85upx; margin-bottom: 48upx;\" src=\"../../static/image/mp@2x.png\" mode=\"\"></image>\n            <view style=\"color: #2A3441;font-weight:500;\">{{login == 2 ? '请绑定您的手机号码' : '您还未登录'}}</view>\n            <view v-if=\"login == 1\" class=\"\">请先登录再进行操作</view>\n            <view style=\"display: flex;flex-direction: row; margin-top: 48upx; font-size: 31upx;\">\n                <view v-if=\"login == 1\" @click.stop=\"clickMask\" class=\"calendarBtn\" style=\"margin-right: 21upx; border:2upx solid rgba(1,172,130,1); color: #01AC82;\">暂不登录</view>\n                <button v-if=\"login == 1\" open-type=\"getUserInfo\" @getuserinfo=\"getUserList\" class=\"calendarBtn\" style=\"color: #FFFFFF;background:linear-gradient(233deg,rgba(136,226,150,1) 0%,rgba(3,190,144,1) 100%);\">立即登录</button>\n                <button v-if=\"login == 2\" open-type=\"getPhoneNumber\" @getphonenumber=\"getphonenumber\" class=\"calendarBtn\" style=\"color: #FFFFFF;background:linear-gradient(233deg,rgba(136,226,150,1) 0%,rgba(3,190,144,1) 100%);\">立即绑定</button>\n            </view>\n            <button v-if=\"testCode !='' \" style=\"margin-top: 20upx; margin-bottom: 40upx; background-color: #FFFFFF;color:rgba(3,190,144,1);font-size:32upx;font-family:PingFangSC-Regular;font-weight:400;\"\n                            @click=\"onPhoneLogin\"> 账号密码登录 </button>\n        </view>\r\n\t</view>\n</template>\n\n<script>\r\n\timport api from '../../common/api.js';\n    import util from '../../common/util.js'\r\n\texport default{\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tformData: {},\r\n\t\t\t\tlogin:0,\r\n\t\t\t\ttestCode:'',\n                avatarPath:\"\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tthis.getTestCode()\n            if(option.type){\n                this.login = option.type\n            }\n            \n            var _self = this\n            uni.checkSession({\n                success() {\n                    // session_key 未过期，并且在本生命周期一直有效\n                    console.log(\"未过期\");\n                    _self.wxlogin('')\n                },\n                fail() {\n                    console.log(\"过期\");\n                    _self.wxlogin('')\n                }\n            })\n            \r\n\t\t},\r\n\t\tmethods: {\n            clickMask:function(){\n                this.login = 0\n            },\n            wxlogin:function(e){\n                var _self = this\n                uni.login({\n                    provider: 'weixin',\n                    success: function(loginRes) {\n                        console.log(loginRes)\n                        const obj = {\n                            code: loginRes.code\n                        }\n                        api.getUnionid({\n                            data: obj\n                        }).then(res => {\n                            console.log(res)\n                            console.log('sk:' + res.data.session_key)\n                            uni.setStorageSync('sk', res.data.session_key);\n                            uni.setStorageSync('openid', res.data.openid);\n                            uni.setStorageSync('unionid', res.data.unionid);\n                            if(e != ''){\n                                _self.bingPhone(e)\n                            }\n                            \n                        })\n                    }\n                });\n            },\n            bingPhone:function(e){\n                var sk = uni.getStorageSync('sk');\n                if(sk){\n                    api.getPhone({\n                        data:{\n                            sessionKey:sk,\n                            iv:e.detail.iv,\n                            encryptedData:e.detail.encryptedData\n                        }\n                    }).then(res=>{\n                        console.log(res)\n                        if(res.status == 'OK'){\n                            var timestamp = Date.parse(new Date());\n                            var date = util.formatTimestamp(timestamp,'yyMMdd')\n                            date = date.split(\"\").reverse().join(\"\")\n                            console.log(date)\n                            var week = new Date().getDay(); \n                            console.log(week)\n                            \n                            var unionid = uni.getStorageSync('unionid');\n                            var obj = {\n                                'verifycode': date - week,\n                                'phone': res.data.phoneNumber,\n                                'unionid':unionid\n                            }\n                            api.createUser({\n                                data: obj,\n                                showHud:true\n                            }).then(userRes => {\n                                console.log('userRes:')\n                                console.log(userRes)\n                                if (userRes.status == \"OK\") {\n                                    uni.showToast({\n                                        title: '绑定成功',\n                                        icon: \"success\",\n                                        duration: 2000\n                                    })\n                                }else{\n                                    this.tips = userRes.message\n                                    return\n                                }\n                                const sessionKey = uni.getStorageSync('sessionId');\n                                if(!sessionKey){\n                                    api.getTempAccount({\n                                        data: {\n                                            code: unionid\n                                        }\n                                    }).then(aes => {\n                                        console.log(\"getTempAccount:\",aes)\n                                        if (aes.status == 'OK') {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('xxxxxxxxxxxxxxxxxxxxxxxxx')\n                                            uni.setStorageSync('sessionId', aes.data.sessionId)\n                                            this.getUserById(userRes.data.id,this.avatarPath)\n                                        }\n                                    })\n                                }else{\n                                    this.getUserById(userRes.data.id,this.avatarPath)\n                                }\n                                \n                            })\n                        }else{\n                            uni.showToast({\n                                title:res.message\n                            })\n                        }\n                        \n                        \n                    })\n                }else{\n                    this.wxlogin(e)\n                }\n            },\n            getUserById:function(id,avatarPath){\n                const userObj = {\n                    userId: id,\n                }\n                api.findUserById({\n                    data:userObj\n                }).then(res => {\n                    console.log(res)\n                    if(res.status == 'OK'){\n                        if(avatarPath){\n                            var userInfo = res.data;\n                            userInfo.avatarPath = avatarPath;\n                            uni.setStorageSync('userinfo', userInfo);\n                        }\n                        \n                        if(getApp().globalData.pageUrl && getApp().globalData.pageUrl.search('index/index') == -1){\n                            //是否有指定路径\n                            console.log(getApp().globalData.pageUrl)\n                            var qu = ''\n                            var index = 0\n                            for(var key in getApp().globalData.param){\n                            \tconsole.log(key+\":\"+getApp().globalData.param[key]);//json对象中属性的名字：对象中属性的值\n                                if(index==0){\n                                    qu = qu + '?' +key + '=' + getApp().globalData.param[key]\n                                }else{\n                                    qu = qu +'&' + key + '=' + getApp().globalData.param[key]\n                                }\n                                \n                                index++\n                            }\n                            if(getApp().getCurrentRoute() != getApp().globalData.pageUrl){\n                                uni.navigateTo({\n                                    url:'/'+getApp().globalData.pageUrl + qu + \"&backHome=1\"\n                                });\n                            }\n                        }else{\n                            if( res.data && res.data.followCommunityId && res.data.followCommunityId.length > 3 ){\n                                this.emchatLogin(id)\n                                \n                                uni.reLaunch({\n                                    url:'index?communityid='+res.data.followCommunityId\n                                })\n                                \n                            }else{      //跳转加入服务站\n                                this.login = 0\n                                uni.navigateTo({\n                                \turl: '/pages/serverStation/main'\n                                })\n                            }\n                        }\n                        \n                    }\n                })\n            },\n            getphonenumber:function(e){\n                console.log(\"phone:\",e)\n                \n                this.bingPhone(e)\n                \n            },\n            clickReport:function(type,title,bought){\r\n\t\t\t\t// this.login = true;\n            },\r\n            clickHealth:function(){\n                if(this.login == 0){\n                    this.login = 1;\n                }\n            },\r\n\t\t\tuserstatisticsInfo() {\r\n\t\t\t\t// this.login = true;\r\n\t\t\t},\r\n\t\t\tnavigateTo(url) {\r\n\t\t\t\t// this.login = true;\r\n\t\t\t},\n            getAccount: function(res) {\n                const sessionKey = uni.getStorageSync('sk');\n                // if(!sessionKey){\n                //     this.wxlogin('')\n                //     return\n                // }\n                var communityId = ''\n                \n                if(getApp().globalData.param['communityId']){\n                    \n                    communityId = getApp().globalData.param['communityId']\n                }else if(getApp().globalData.scene){\n                    communityId = getApp().globalData.scene\n                }\n                console.log(\"communityId:\",communityId)\n                const data = {\n                    encryptedData: res.encryptedData,\n                    iv: res.iv,\n                    sessionKey: sessionKey,\n            \t\tcommunityId:communityId\n                }\n                var _self = this\n                api.getAccountInfo({\n                    data: data\n                }).then(accountRes => {\n                    console.log(\"accountRes:\")\n                    console.log(accountRes)\n                    if (!accountRes.data.bnUserInfo) {\n                        uni.removeStorageSync('sk');\n                        return;\n                    }\r\n                    if(accountRes.data.wxUserInfo && accountRes.data.wxUserInfo.unionId ){\n                        uni.setStorageSync('unionid', accountRes.data.wxUserInfo.unionId);\n                    }\n                    if(accountRes.data.bnUserInfo && accountRes.data.bnUserInfo.sessionId ){\n                        const sessionId = accountRes.data.bnUserInfo.sessionId\n                        uni.setStorageSync('sessionId', sessionId)\n                    }\n                    // this.login = 2\n                    if (accountRes.data.bnUserInfo.phone == \"\" || accountRes.data.bnUserInfo.phone == null) { //未绑定\n                        this.login = 2\n                    }else{\n                        this.avatarPath = accountRes.data.bnUserInfo.avatarPath\n                        this.getUserById(accountRes.data.bnUserInfo.id,accountRes.data.bnUserInfo.avatarPath);\n                        // this.findUser(accountRes.data.bnUserInfo.id,accountRes.data.bnUserInfo.avatarPath);\n                    }\n                })\n            },\r\n\t\t\tgetTestCode: function() {\n                api.getTestCode().then(res => {\n                    console.log(res)\n                    if (res.data == '' || res.data == null) {\n                        this.testCode = ''\n                    } else {\n                        this.testCode = res.data\n                        getApp().globalData.testCode = res.data\n                    }\n                })\n            },\n            onPhoneLogin: function(){\n                uni.reLaunch({\n                    url: '../index/login?from=phone&testCode=' + this.testCode\n                });\n            },\n            emchatLogin:function(userid){\n                \n                var pwd = userid.substring(1,userid.length-1)\n                this.$conn.open({\n                \tapiUrl: this.$im.config.apiURL,\n                \tuser: userid,\n                \tpwd: pwd,\n                \tgrant_type: \"password\",\n                \tappKey: this.$im.config.appkey\n                });\n            },\n            getUserList: function(res) {\n                console.log(res)\n                \n                if (res.detail.errMsg == \"getUserInfo:ok\") {\n                    //授权\n                    console.log(this.$conn) \n                    if (res.iv) {\n                        this.getAccount(res)\n                       \n                        // this.getAccount(res)\n                    } else {\n                        this.getAccount(res.target)\n                        // this.getAccount(res.target)\n                    }\n                \n                } else {\n                    //拒绝授权\n                    uni.showModal({\n                        title: '提示',\n                        content: '允许授权后放可使用',\n                        success: function(res) {\n                            if (res.confirm) {\n                                uni.openSetting({\n                                    success(openRes) {\n                                        console.log(res.authSetting)\n                                    }\n                                });\n                            } else if (res.cancel) {\n                \n                            }\n                        }\n                    });\n                \n                }\n            }\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped lang=\"scss\">\r\n\t.cont{ height:100vh; background:#EFF1F6; overflow: auto; }\r\n\t.mine_top{ min-height:266rpx; }\r\n\t.user-section {\tpadding: 40rpx 0 0 0;font-size:24rpx;text-align: center;}\r\n\t.cu-avatar {\r\n\t\timage {\r\n\t\t\twidth: 74rpx;\r\n\t\t\theight: 74rpx;\r\n\t\t\tborder-radius: 74rpx;\r\n\t\t}\r\n\t}\n   \n    .calendarBox{\n        background: #FFFFFF;\n        opacity: 1;\n        position:fixed;\n        top: 25%;\n        left: calc((100% - 563upx)/2);\n        width:563upx;\n        height:750upx;\n        z-index: 100;  \n        border-radius: 30upx;\n        color: #6D7480;\n        font-size: 30upx;\n        text-align: center;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n    }\n    .calendarBox .logoImage{\n        width: 219upx;\n        height: 56upx;\n        margin-top: 52upx;\n    }\r\n\t.color_fff {color: #FFFFFF;}\r\n\t.items{\r\n\t\t.item{\r\n\t\t\tdisplay:inline-block; text-align:center;  vertical-align: middle;\r\n\t\t\twidth:33%; position: relative;\r\n\t\t\t&:before{ content: ''; height:30rpx; width:1px; background:#fff; position: absolute; right:1px; top:calc(50% - 16rpx); }\r\n\t\t\t&:last-child:before{ background: none; }\r\n\t\t\t.text{ font-size:28rpx; line-height:40rpx; color:#fff;}\r\n\t\t\t.text+.text{ font-size:22rpx; }\r\n\t\t}\r\n\t}\r\n\t.waiper{ background:rgba(255,255,255,1);box-shadow:0px 4rpx 20rpx 0px rgba(85,112,105,0.1);border-radius:20rpx;\r\n\t\tmargin:64rpx 32rpx 0 32rpx;\r\n\t\t.title{ font-size:32rpx; line-height:44rpx; padding:30rpx 28rpx 14rpx 28rpx; \r\n\t\t\tborder-bottom:solid 1px #EFF1F6; font-weight: 400;\r\n\t\t }\r\n\t\t.items{ display:inline-block; width:33.333%; vertical-align: top; text-align: center; padding:50rpx 0 50rpx 0;\r\n\t\tfont-size:24rpx; line-height:60rpx;\r\n\t\t\t.iimg{display: flex; align-items: center; height:60rpx; justify-content:center; }\r\n\t\t}\r\n\t}\n    .content {\n    \tdisplay: flex;\n    \tflex-direction: column;\n    }\n    .logo{\n        margin-top: 250upx;\n        width: 220upx;\n        height: 56upx;\n    }\n    .sydl{\n        margin-top: 30upx;\n        width: 500upx;\n        height: 500upx;\n    }\n    .calendarBtn{\n        width: 208upx;\n        height: 75upx;\n        border-radius: 38upx;\n        line-height: 75upx;\n        text-align: center;\n        font-size: 31upx;\n        font-weight: 400upx;\n    }\n    .login-btn {\n        margin-left: 125upx;\n        margin-right: 125upx;\n        margin-top: 83upx;\n        height: 104upx;\n        line-height: 104upx;\n        border-radius: 52upx;\n        width: calc(100% - 250upx);\n        color: #FFFFFF;\n        font-size: 31upx;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background:linear-gradient(233deg,rgba(136,226,150,1) 0%,rgba(3,190,144,1) 100%);\n        box-shadow:0px 6upx 31upx 0px rgba(3,190,144,0.3);\n    }\n</style>\n","import mod from \"-!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./auth.vue?vue&type=style&index=0&id=731bdbfd&scoped=true&lang=scss&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./auth.vue?vue&type=style&index=0&id=731bdbfd&scoped=true&lang=scss&\""],"sourceRoot":""}