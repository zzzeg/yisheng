{"version":3,"sources":["webpack:///E:/yisheng/trunk/main.js","webpack:///E:/yisheng/trunk/pages/index/chatRoom.vue?889f","webpack:///E:/yisheng/trunk/pages/index/chatRoom.vue?d002","webpack:///E:/yisheng/trunk/pages/index/chatRoom.vue?5881","webpack:///E:/yisheng/trunk/pages/index/chatRoom.vue?a0b0","webpack:///E:/yisheng/trunk/pages/index/chatRoom.vue","webpack:///E:/yisheng/trunk/pages/index/chatRoom.vue?a8ce"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","msgStorage","require","disp","data","jianpanicon","showPlaceholder","isRequest","dialogtype","score","draft","content","lastMsgTime","page","size","userId","instanceId","recordId","expertId","expertPics","uploadParams","messageList","isFinish","isload","textMsg","isHistoryLoading","scrollAnimation","scrollTop","scrollToView","msgList","msgImgList","myuid","RECORDER","uni","getRecorderManager","isVoice","voiceTis","recordTis","recording","willStop","initPoint","identifier","Y","recordTimer","recordLength","AUDIO","createInnerAudioContext","playMsgid","VoiceTimer","popupLayerClass","hideMore","hideEmoji","communityId","title","userinfo","chatType","onHide","onUnload","onReady","create_or_onready","onLoad","option","getStorageSync","to","findCommunity","topic","setNavigationBarTitle","purpose","api","getUploadParams","then","res","console","log","initMsgList","onEnded","onStart","e","recordBegin","onStop","recordEnd","filters","toFixed2","value","toFixed","methods","clickProduct","item","type","navigateTo","url","id","goodsType","hospId","clickWenzhen","addAdvisoryRecord","status","community","expert","name","pics","findCommunityById","mangerName","JSON","parse","mangerAvatar","me","on","err","renderableMsg","curChatMsg","sesskey","info","from","msg","nowDate","Date","lastid","length","message","text","push","time","getHours","getMinutes","uid","username","face","$nextTick","clickReport","extContent","switchVoice","hideDrawer","sendText","sendMsg","textareaFocus","showPic","previewImage","indicator","current","urls","addVoiceMsg","addTextMsg","addImgMsg","setPicSize","toId","sec","addCommunityMessage","addRes","accountinfo","headUrl","avatarPath","addByExpert","getImage","chooseImage","count","sourceType","sizeType","success","i","tempFilePaths","getImageInfo","src","image","showLoading","uploadFile","filePath","formData","policy","Signature","result","r","location","filepath","showToast","icon","duration","fail","complete","hideLoading","statusCode","errMsg","screenMsg","addSystemTextMsg","addSystemRedEnvelopeMsg","addRedEnvelopeMsg","vibrateLong","getMsgList","Viewid","getCommunityMessage","listRes","list","formattingMessage","expertMessage","tempDate","tempHhhh","today","util","formatDate","tempMmmm","forEach","index","date","formatTimestamp","extJson","price","originalPrice","zhekou","unshift","fromId","userName","hhhhh","mmmm","maxW","upx2px","maxH","w","h","scale","loadHistory","voiceBegin","touches","clientY","start","format","playVoice","paused","stop","play","setInterval","voiceCancel","voiceIng","touche","voiceEnd","clearInterval","tempFilePath","min","parseInt","stringify","openDrawer","setTimeout","discard"],"mappings":"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","file":"pages/index/chatRoom.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/chatRoom.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chatRoom.vue?vue&type=template&id=0a56b2b0&\"\nvar renderjs\nimport script from \"./chatRoom.vue?vue&type=script&lang=js&\"\nexport * from \"./chatRoom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chatRoom.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"E:/yisheng/trunk/pages/index/chatRoom.vue\"\nexport default component.exports","export * from \"-!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatRoom.vue?vue&type=template&id=0a56b2b0&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatRoom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatRoom.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import api from '../../common/api.js';\n    import util from '../../common/util.js';\n    // import xyDialog from '../../components/xy-dialog/xy-dialog.vue'\n    let msgStorage = require(\"@/components/easemob/comps/chat/msgstorage\");\n    let msgType = require(\"@/components/easemob/comps/chat/msgtype\");\n    let disp = require(\"@/components/easemob/utils/broadcast\");\n    \n    export default {\n        // components: {\n        //     xyDialog\n        // },\n    \tdata() {\n    \t\treturn {\n                jianpanicon:'../../static/image/icon_yysr.png',\n                showPlaceholder:true,\n                isRequest:false,\n                dialogtype:1,\n                score:null,\n                draft:null,\n                content:'',\n                lastMsgTime:'',\n                page:1,\n                size:10,\n                userId:null,\n                instanceId:null,\n                recordId:'',\n                expertId:null,\n                expertPics:null,\n                uploadParams:null,\n                \n                messageList:[],\n                \n                isFinish:null,\n                isload:false,\n    \t\t\t//文字消息\n    \t\t\ttextMsg:'',\n    \t\t\t//消息列表\n    \t\t\tisHistoryLoading:false,\n    \t\t\tscrollAnimation:false,\n    \t\t\tscrollTop:0,\n    \t\t\tscrollToView:'',\n    \t\t\tmsgList:[],\n    \t\t\tmsgImgList:[],\n    \t\t\tmyuid:0,\n    \t\t\t\n    \t\t\t//录音相关参数\n\n    \t\t\t//H5不能录音\n    \t\t\tRECORDER:uni.getRecorderManager(),\n\n    \t\t\tisVoice:false,\n    \t\t\tvoiceTis:'按住 说话',\n    \t\t\trecordTis:\"手指上滑 取消发送\",\n    \t\t\trecording:false,\n    \t\t\twillStop:false,\n    \t\t\tinitPoint:{identifier:0,Y:0},\n    \t\t\trecordTimer:null,\n    \t\t\trecordLength:0,\n    \t\t\t//播放语音相关参数\n    \t\t\tAUDIO:uni.createInnerAudioContext(),\n    \t\t\tplayMsgid:null,\n    \t\t\tVoiceTimer:null,\n    \t\t\t// 抽屉参数\n    \t\t\tpopupLayerClass:'',\n    \t\t\t// more参数\n    \t\t\thideMore:true,\n    \t\t\t//表情定义\n    \t\t\thideEmoji:true,\n                communityId:null,\n                title:'',\n                userinfo:null,\n                chatType:1\n    \t\t}\n    \t},\n        onHide() {\n            \n        },\n        onUnload(){\n            \n        },\n        onReady() {\n            this.create_or_onready();\n        },\n    \tonLoad(option) {\n            this.chatType = option.chatType\n            \n            this.userinfo = uni.getStorageSync('userinfo');\n            \n            this.userId = this.userinfo.userId\n            this.expertId = option.to\n            this.recordId = option.recordId\n            this.communityId = option.communityId\n\t\t\tthis.findCommunity(this.communityId );\n            this.isFinish = option.isFinish\n            this.title = option.title ? option.title : '';\n            this.expertPics = option.topic\n            uni.setNavigationBarTitle({\n                title:this.title\n            });\n            const data = {\n            \tpurpose: 'useravatar'\n            }\n            api.getUploadParams({\n            \tdata: data\n            }).then(res => {\n            \tconsole.log('getUploadParams')\n            \tconsole.log(res)\n            \tthis.uploadParams = res.data\n            })\n            \n            this.initMsgList();\n            var _self = this\n            // this.interval = setInterval(function(){ \n            //     _self.updateLastMsg()\n            // }, 10000);\n            \n            //语音自然播放结束\n            this.AUDIO.onEnded((res)=>{\n            \tthis.playMsgid=null;\n            });\n\n            //录音开始事件\n            this.RECORDER.onStart((e)=>{\n            \tthis.recordBegin(e);\n            })\n            //录音结束事件\n            this.RECORDER.onStop((e)=>{\n            \tthis.recordEnd(e);\n            })\n\n    \t},\n        filters: {\n        \ttoFixed2: function(value) {\n        \t\treturn value.toFixed(2);\n        \t},\n        },\n    \tmethods: {\n            clickProduct:function(item){\n                console.log(item)\n                if( item.type && item.type == \"GOODS\"){\n                    uni.navigateTo({\n                    \turl: `/pages/health-product-detail/health-product-detail?id=${item.id}&type=${item.goodsType}`,\n                    });\n                }else if( item.type && item.type == \"DOCTOR\"){\n                    uni.navigateTo({\n                        url: `/pages/privateDoctor/info?id=${item.id}&type=doctor`\n                    })\n                }else if( item.type && item.type == \"KK\"){\n                    uni.navigateTo({\n                        url: `/pages/health-examination/product-info?code=${item.id}&hospId=${item.hospId}`\n                    })\n                }\n            },\n            clickWenzhen:function(){\n                var data = {\n                    expertId:this.expertId,\n                    type:'IMAGE',\n                    communityId:this.communityId\n                }\n                \n                api.addAdvisoryRecord({\n                    data:data\n                }).then(res=>{\n                    if(res.status == 'OK'){\n                        uni.navigateTo({\n                            url:\"chatRoom?chatType=2&recordId=\" + res.data.id +\"&to=\" + this.communityId+\"&communityId=\"\n                            + this.community.id +\"&title=\" + this.community.expert.name+\"&topic=\" + this.community.expert.pics\n                        })\n                    }\n                })\n            },\n\t\t\tfindCommunity:function(id){\n\t\t\t\tif(!id){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t    const data = {\n\t\t\t        id:id\n\t\t\t    }\n\t\t\t    api.findCommunityById({\n\t\t\t        data:data\n\t\t\t    }).then(res => {\n\t\t\t        console.log(res)\n\t\t\t        if(res.status == 'OK'){\n\t\t\t\t\t\tif(this.title===''){\n\t\t\t\t\t\t\tthis.title = res.data.mangerName;\n\t\t\t\t\t\t\tthis.expertPics = JSON.parse(res.data.mangerAvatar)&&JSON.parse(res.data.mangerAvatar)[0]&&JSON.parse(res.data.mangerAvatar)[0].url;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n            create_or_onready() {\n                let me = this;\n                disp.on('em.xmpp.error.sendMsgErr', function(err) {\n                    console.log(err)\n                \t// curMsgMid = err.data.mid\n                \t// isFail = true\n                \treturn\n                });\n                \n                msgStorage.on(\"newChatMsg\", function(renderableMsg, type, curChatMsg, sesskey){\n                    \n                \tconsole.log(renderableMsg)\n                    \n                    if(renderableMsg.info.from == me.expertId && renderableMsg.info.to == me.userId){\n                        \n                        if(renderableMsg.msg.data[0].data == \"健康调理报告已发送，请到查看报告里查看。\"){\n                            me.initMsgList()\n                        }else{\n                            var nowDate = new Date();\n                            let lastid = 1\n                            if(me.msgList && me.msgList.length>0){\n                                lastid = me.msgList[me.msgList.length-1].msg.id;\n                            }\n                            lastid = lastid + 1;\n                            \n                            var message = {}\n                            message.type = 'user'\n                            message.msg = {}\n                            message.msg.id = lastid\n                            message.msg.content = {}\n                            if(renderableMsg.msg.type=='txt'){       //文字类型\n                                message.msg.type = \"text\"\n                                message.msg.content.text = renderableMsg.msg.data[0].data\n                            }else if(renderableMsg.msg.type=='img'){     //图片类型\n                                message.msg.type = \"img\"\n                                message.msg.content.url = renderableMsg.msg.url\n                            }else if(renderableMsg.msg.type=='audio'){\n                                message.msg.type = \"voice\"\n                                message.msg.content.length = renderableMsg.msg.content\n                                message.msg.content.url = renderableMsg.msg.url\n                                me.msgImgList.push(message.msg.content.url);\n                            }\n                            \n                            message.msg.time = nowDate.getHours()+\":\"+nowDate.getMinutes()\n                            message.msg.userinfo = {}\n                                          \n                            message.msg.userinfo.uid = me.expertId\n                            message.msg.userinfo.username = me.title\n                            message.msg.userinfo.face = me.expertPics\n                            me.msgList.push(message)\n                                                   \n                            me.$nextTick(function() {\n                            \t// 滚动到底\n                                \n                            \tme.scrollToView = 'msg'+message.msg.id\n                            });\n                        }\n                    }\n                    \n                });\n            },\n            clickReport:function(extContent){\n                uni.navigateTo({\n                    url:'doctorReport?rid='+ extContent.recordId\n                })\n            },\n          \n            // 切换语音/文字输入\n            switchVoice(){\n            \tthis.hideDrawer();\n            \tthis.isVoice = this.isVoice?false:true;\n                if(!this.isVoice){\n                    this.jianpanicon = '../../static/image/icon_yysr.png'\n                }else{\n                    this.jianpanicon = '../../static/image/icon_sxsr.png'\n                }\n            },\n            // 发送文字消息\n            sendText(){\n            \tthis.hideDrawer();//隐藏抽屉\n            \tif(!this.textMsg){\n            \t\treturn;\n            \t}\n            \tlet content = this.textMsg;\n            \tlet msg = {text:content}\n            \tthis.sendMsg(msg,'text');\n            \tthis.textMsg = '';//清空输入框\n            },\n            //获取焦点，如果不是选表情ing,则关闭抽屉\n            textareaFocus(){\n                console.log('textareaFocus')\n            \tif(this.popupLayerClass=='showLayer' && this.hideMore == false){\n            \t\tthis.hideDrawer()\n            \t}\n                // this.sendText()\n            },\n            // 预览图片\n            showPic(msg){\n                console.log(msg)\n            \tuni.previewImage({\n            \t\tindicator:\"none\",\n            \t\tcurrent:msg.content.url,\n            \t\turls: this.msgImgList\n            \t});\n            },\n            // 添加语音消息到列表\n            addVoiceMsg(msg){\n            \tthis.msgList.push(msg);\n            },\n            // 添加文字消息到列表\n            addTextMsg(msg){\n            \tthis.msgList.push(msg);\n            },\n            // 添加图片消息到列表\n            addImgMsg(msg){\n            \tmsg.msg.content = this.setPicSize(msg.msg.content);\n            \tthis.msgImgList.push(msg.msg.content.url);\n            \tthis.msgList.push(msg);\n            },\n            // 发送消息\n            sendMsg(content,type){\n            \t//实际应用中，此处应该提交长连接，模板仅做本地处理。\n            \tvar nowDate = new Date();\n                \n            \tlet lastid = 1\n                if(this.msgList && this.msgList.length>0){\n                    lastid = this.msgList[this.msgList.length-1].msg.id;\n                }\n            \tlastid = lastid + 1;\n                var data \n                if(type == 'text'){\n          \n                    data = {\n                        expertId:this.expertId,\n                        toId:this.expertId,\n                        type:'txt',\n                        content:content.text,\n                        communityId:this.communityId\n                    }\n                }else if(type== 'img'){\n                          \n                    data = {\n                        expertId:this.expertId,\n                        toId:this.expertId,\n                        type:'img',\n                        content:'[图片]',\n                        url:content.url,\n                        communityId:this.communityId\n                    }\n                }else if(type== 'voice'){\n                    type == 'audio'\n                    data = {\n                        expertId:this.expertId,\n                        toId:this.expertId,\n                        type:'audio',\n                        content:content.sec,\n                        url:content.url,\n                        communityId:this.communityId\n                    }\n                }\n                \n                var _self = this\n                if(this.chatType == 1){\n                    api.addCommunityMessage({\n                         data: data\n                    }).then(addRes => {\n                        console.log(addRes)\n                        if(addRes.status == 'OK'){\n                            var accountinfo = uni.getStorageSync('userinfo');\n                            var headUrl = accountinfo.avatarPath\n                            let msg = {type:'user',msg:{id:lastid,time:nowDate.getHours()+\":\"+nowDate.getMinutes(),type:type,userinfo:{uid:0,username:accountinfo.name,face:headUrl},content:content}}\n                            _self.msgList.push(msg)\n                            if(type== 'img'){\n                                _self.msgImgList.push(msg.msg.content.url);\n                            }\n                            _self.$nextTick(function() {\n                            \t// 滚动到底\n                            \t_self.scrollToView = 'msg'+msg.msg.id\n                            });\n                        }\n                        \n                    })\n                }else{\n                    api.addByExpert({\n                        data: data\n                    }).then(addRes => {\n                        console.log(addRes)\n                        if(addRes.status == 'OK'){\n                            var accountinfo = uni.getStorageSync('userinfo');\n                            var headUrl = accountinfo.avatarPath\n                            let msg = {type:'user',msg:{id:lastid,time:nowDate.getHours()+\":\"+nowDate.getMinutes(),type:type,userinfo:{uid:0,username:accountinfo.name,face:headUrl},content:content}}\n                            _self.msgList.push(msg)\n                            if(type== 'img'){\n                                _self.msgImgList.push(msg.msg.content.url);\n                            }\n                            _self.$nextTick(function() {\n                            \t// 滚动到底\n                            \t_self.scrollToView = 'msg'+msg.msg.id\n                            });\n                        }\n                        \n                    })\n                }\n                \n                \n            },\n            //选照片 or 拍照\n            getImage(type){\n            \tthis.hideDrawer();\n                var _self = this\n            \tuni.chooseImage({\n                    count: 1,\n            \t\tsourceType:[type],\n            \t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n            \t\tsuccess: (res)=>{\n            \t\t\tfor(let i=0;i<res.tempFilePaths.length;i++){\n            \t\t\t\tuni.getImageInfo({\n            \t\t\t\t\tsrc: res.tempFilePaths[i],\n            \t\t\t\t\tsuccess: (image)=>{\n            \t\t\t\t\t\t\n                                    if (_self.uploadParams) {\n                                    \tuni.showLoading({\n                                    \t\ttitle: '图片上传中'\n                                    \t})\n                                    \tuni.uploadFile({\n                                    \t\turl: _self.uploadParams.url,\n                                    \t\tfilePath: res.tempFilePaths[0],\n                                    \t\tname: 'userAvatar',\n                                    \t\tformData: {\n                                    \t\t\tpolicy: _self.uploadParams.policy,\n                                    \t\t\tSignature: _self.uploadParams.Signature\n                                    \t\t},\n                                    \t\tsuccess(result) {\n                                    \t\t\tif (result.data) {\n                                                    \n                                    \t\t\t\tlet r = JSON.parse(result.data)\n                                    \t\t\t\tif (r.status === 'OK') {\n                                    \t\t\t\t\tlet msg = {url:r.data.location + r.data.filepath};\n                                    \t\t\t\t\t_self.sendMsg(msg,'img');\n                                    \t\t\t\t} else {\n                                    \t\t\t\t\tuni.showToast({\n                                    \t\t\t\t\t\ttitle: r.message,\n                                    \t\t\t\t\t\ticon: \"none\",\n                                    \t\t\t\t\t\tduration: 2000\n                                    \t\t\t\t\t})\n                                    \t\t\t\t}\n                                    \t\t\t}\n                                    \t\t},\n                                    \t\tfail() {\n                                                    \n                                    \t\t},\n                                    \t\tcomplete(res) {\n                                    \t\t\tuni.hideLoading()\n                                    \t\t\tif (res.statusCode !== 200) {\n                                    \t\t\t\tuni.showToast({\n                                    \t\t\t\t\ttitle: res.errMsg,\n                                    \t\t\t\t\ticon: \"none\",\n                                    \t\t\t\t\tduration: 2000\n                                    \t\t\t\t})\n                                    \t\t\t}\n                                    \t\t}\n                                    \t})\n                                    } else {\n                                    \tuni.showToast({\n                                    \t\ttitle: 'getUploadParams failed!',\n                                    \t\ticon: \"none\",\n                                    \t\tduration: 2000\n                                    \t})\n                                    }\n                                    \n            \t\t\t\t\t\t\n            \t\t\t\t\t}\n            \t\t\t\t});\n            \t\t\t}\n            \t\t}\n            \t});\n            },\n            // 接受消息(筛选处理)\n            screenMsg(msg){\n            \t//从长连接处转发给这个方法，进行筛选处理\n            \tif(msg.type=='system'){\n            \t\t// 系统消息\n            \t\tswitch (msg.msg.type){\n            \t\t\tcase 'text':\n            \t\t\t\tthis.addSystemTextMsg(msg);\n            \t\t\t\tbreak;\n            \t\t\tcase 'redEnvelope':\n            \t\t\t\tthis.addSystemRedEnvelopeMsg(msg);\n            \t\t\t\tbreak;\n            \t\t}\n            \t}else if(msg.type=='user'){\n            \t\t// 用户消息\n            \t\tswitch (msg.msg.type){\n            \t\t\tcase 'text':\n            \t\t\t\tthis.addTextMsg(msg);\n            \t\t\t\tbreak;\n            \t\t\tcase 'voice':\n            \t\t\t\tthis.addVoiceMsg(msg);\n            \t\t\t\tbreak;\n            \t\t\tcase 'img':\n            \t\t\t\tthis.addImgMsg(msg);\n            \t\t\t\tbreak;\n            \t\t\tcase 'redEnvelope':\n            \t\t\t\tthis.addRedEnvelopeMsg(msg);\n            \t\t\t\tbreak;\n            \t\t}\n            \t\tconsole.log('用户消息');\n            \t\t//非自己的消息震动\n            \t\tif(msg.msg.userinfo.uid!=this.myuid){\n            \t\t\tconsole.log('振动');\n            \t\t\tuni.vibrateLong();\n            \t\t}\n            \t}\n            \tthis.$nextTick(function() {\n            \t\t// 滚动到底\n            \t\tthis.scrollToView = 'msg'+msg.msg.id\n            \t});\n            },\n            initMsgList(){\n                this.page = 1\n                this.msgList = []\n                this.getMsgList(null)\n            },\n            // 加载初始页面消息\n            getMsgList(Viewid){\n                \n                if(this.chatType == 1){\n                    var data = {\n                        page:this.page,\n                        size:this.size,\n                        communityId:this.communityId,\n                    }\n                    let _self = this;\n                    var list = []\n                    var currentDate = ''\n                    api.getCommunityMessage({\n                        data:data\n                    }).then(listRes=>{\n                        console.log(listRes)\n                        if(listRes.status=='OK' && listRes.list.length>0 ){\n                            \n                            this.formattingMessage(listRes,Viewid)\n                            \n                        }\n                        _self.isHistoryLoading = false;\n                    })\n                }else{\n                    var data = {\n                        page:this.page,\n                        size:this.size,\n                        communityId:this.communityId,\n                        expertId:this.expertId\n                    }\n                    let _self = this;\n                    var list = []\n                    var currentDate = ''\n                    api.expertMessage({\n                        data: data\n                    }).then(listRes => {\n                    \n                        if(listRes.status=='OK' && listRes.list.length>0 ){\n                            \n                            this.formattingMessage(listRes,Viewid)\n                            \n                        }\n                        _self.isHistoryLoading = false;\n                    })\n                }\n                \n                \n            },\n            formattingMessage:function(listRes,Viewid){\n                let _self = this;\n                this.messageList = listRes.list\n                var today = util.formatDate(new Date, 'yyyy-MM-dd')\n                var tempDate\n                var tempHhhh \n                var tempMmmm = 0\n                \n                listRes.list.forEach((item,index)=>{\n                    \n                    var date = util.formatTimestamp(item.time, 'yyyy-MM-dd')\n                                            \n                    var time = util.formatTimestamp(item.time,'hh:mm')\n                    \n                    if(!item.extJson){\n                        var message = {}\n                        message.type = 'user'\n                        message.msg = {}\n                        message.msg.id = item.id\n                        \n                        if(item.type=='txt'){       //文字类型\n                            message.msg.type = \"text\"\n                        }else if(item.type=='img'){     //图片类型\n                            message.msg.type = \"img\"\n                        }else if(item.type=='audio'){\n                            message.msg.type = \"voice\"\n                        }\n                        \n                        message.msg.time = time\n                        message.msg.userinfo = {}\n                        if(item.fromId!=_self.expertId){\n                            //自己发的消息\n                            message.msg.userinfo.uid = 0\n                            message.msg.userinfo.username = item.userName\n                            message.msg.userinfo.face = _self.userinfo.avatarPath\n                            \n                        }else{\n                            \n                            message.msg.userinfo = {\n                                uid:_self.expertId,\n                                username:_self.title,\n                                face:this.expertPics\n                            }\n                            \n                        }\n                        message.msg.content = {}\n                        if(item.type=='txt'){       //文字类型\n                            message.msg.content.text = item.content\n                        }else if(item.type=='img'){     //图片类型\n                 \n                            message.msg.content.url = item.url\n                        }else if(item.type=='audio'){\n                            message.msg.content.url = item.url\n                            message.msg.content.length = item.content\n                        }\n                        \n                        _self.msgList.unshift(message)\n                    }else{\n                        var message = {}\n                        \n                        var extContent = JSON.parse(item.extJson)\n                        var message = {}\n                        message.msg = {}\n                        if(item.type == 'product'){\n                            message.msg.userinfo = {\n                                face:this.userinfo.avatarPath\n                            }\n                            message.type = 'product'\n                            extContent.price = extContent.price.toFixed(2) + ''\n                            extContent.originalPrice = extContent.originalPrice.toFixed(2) + ''\n                            extContent.zhekou = (extContent.price/extContent.originalPrice*10).toFixed(2) + ''\n                  \n                        }else{\n                            message.type = 'suggest'\n                        }\n                        \n                        message.msg.id = item.id\n                        \n                        message.msg.time = date + ' ' + time\n                        message.msg.content = {}\n                        // message.msg.content.text = extContent.content\n                        message.msg.content.extContent = extContent\n                        \n                        // message.msg.score = extContent.score\n                        _self.msgList.unshift(message)\n                    }\n                    \n                    if(today!=date ){     //日期不一样加时间消息\n                        if( tempDate != date){\n                            var message = {}\n                            message = {type:\"system\",msg:{id:0,type:\"text\",content:{text:date+' '+time}}}\n                            _self.msgList.unshift(message)\n                            tempDate = date\n                        }\n                        \n                    }else{          //今天\n                        var message = {}\n                        var hhhhh = util.formatTimestamp(item.time,'hh')\n                        var mmmm = util.formatTimestamp(item.time,'mm')\n                        if(tempHhhh!=hhhhh){        //不同小时\n                            message = {type:\"system\",msg:{id:0,type:\"text\",content:{text:hhhhh+':'+mmmm}}}\n                            _self.msgList.unshift(message)\n                            tempHhhh = hhhhh\n                        }else{      //同一个小时\n                            \n                            if(mmmm - tempMmmm <-2 ){\n                                message = {type:\"system\",msg:{id:0,type:\"text\",content:{text:hhhhh+':'+mmmm}}}\n                                _self.msgList.unshift(message)\n                            }\n                            tempMmmm = mmmm\n                        }\n                        \n                    }\n                    \n                })\n                for(let i=0;i<_self.msgList.length;i++){\n                \tif(_self.msgList[i].type=='user'&&_self.msgList[i].msg.type==\"img\"){\n                \t\t_self.msgList[i].msg.content = _self.setPicSize(_self.msgList[i].msg.content);\n                \t\t_self.msgImgList.push(_self.msgList[i].msg.content.url);\n                \t}\n                }\n                var message = {}\n                                \n                \n                var message = {}\n                message.type = 'goods'\n                message.msg = {}\n                message.msg.id = 'item.id'\n                message.msg.content = {}\n                message.msg.content.text = 'extContent.content'\n                _self.msgList.push(message)\n                // 滚动到底部     \n                _self.$nextTick(function() {\n                \t//进入页面滚动到底部\n                \t_self.scrollTop = 9999;\n                \t_self.$nextTick(function() {\n                \t\t_self.scrollAnimation = true;\n                \t});\n                \t\n                });\n                if(Viewid != null){\n                    //这段代码很重要，不然每次加载历史数据都会跳到顶部\n                    _self.$nextTick(function() {\n                    \t_self.scrollToView = 'msg'+Viewid;//跳转上次的第一行信息位置\n                    \t_self.$nextTick(function() {\n                    \t\t_self.scrollAnimation = true;//恢复滚动动画\n                    \t});\n                    \t\n                    });\n                    \n                }\n            },\n            //处理图片尺寸，如果不处理宽高，新进入页面加载图片时候会闪\n            setPicSize(content){\n            \t// 让图片最长边等于设置的最大长度，短边等比例缩小，图片控件真实改变，区别于aspectFit方式。\n            \tlet maxW = uni.upx2px(350);//350是定义消息图片最大宽度\n            \tlet maxH = uni.upx2px(350);//350是定义消息图片最大高度\n            \tif(content.w>maxW||content.h>maxH){\n            \t\tlet scale = content.w/content.h;\n            \t\tcontent.w = scale>1?maxW:maxH*scale;\n            \t\tcontent.h = scale>1?maxW/scale:maxH;\n            \t}\n            \treturn content;\n            },\n            //触发滑动到顶部(加载历史信息记录)\n            loadHistory(e){\n            \tif(this.isHistoryLoading){\n            \t\treturn ;\n            \t}\n                this.page++\n                \n                \n            \tthis.isHistoryLoading = true;//参数作为进入请求标识，防止重复请求\n            \tthis.scrollAnimation = false;//关闭滑动动画\n            \tvar Viewid = this.msgList[0].msg.id;//记住第一个信息ID\n                \n                this.getMsgList(Viewid)\n            },\n            // 录音开始\n            voiceBegin(e){\n                console.log('voiceBegin')\n            \tif(e.touches.length>1){\n            \t\treturn ;\n            \t}\n                this.recording = true;\n            \tthis.initPoint.Y = e.touches[0].clientY;\n            \tthis.initPoint.identifier = e.touches[0].identifier;\n            \tthis.RECORDER.start({format:\"mp3\"});//录音开始,\n            },\n            // 播放语音\n            playVoice(msg){\n                console.log(this.AUDIO.paused)\n                \n                if(this.playMsgid && this.AUDIO.paused && this.AUDIO.src == msg.content.url){\n                    this.AUDIO.stop()\n                    this.playMsgid=null\n                }else{\n                    this.playMsgid=msg.id;\n                    this.AUDIO.src = msg.content.url;\n                    this.$nextTick(function() {\n                    \tthis.AUDIO.play();\n                    });\n                }\n            \t\n            },\n            //录音开始UI效果\n            recordBegin(e){\n            \tif(!this.recording){\n            \t\treturn;\n            \t}\n            \tthis.voiceTis='松开 结束';\n            \tthis.recordLength = 0;\n            \tthis.recordTimer = setInterval(()=>{\n            \t\tthis.recordLength++;\n            \t},1000)\n            },\n            // 录音被打断\n            voiceCancel(){\n                console.log('voiceCancel')\n            \tthis.recording = false;\n            \tthis.voiceTis='按住 说话';\n            \tthis.recordTis = '手指上滑 取消发送'\n            \tthis.willStop = true;//不发送录音\n            \tthis.RECORDER.stop();//录音结束\n            },\n            // 录音中(判断是否触发上滑取消发送)\n            voiceIng(e){\n                console.log('voiceIng')\n            \tif(!this.recording){\n            \t\treturn;\n            \t}\n            \tlet touche = e.touches[0];\n            \t//上滑一个导航栏的高度触发上滑取消发送\n            \tif(this.initPoint.Y - touche.clientY>=uni.upx2px(100)){\n            \t\tthis.willStop = true;\n            \t\tthis.recordTis = '松开手指 取消发送'\n            \t}else{\n            \t\tthis.willStop = false;\n            \t\tthis.recordTis = '手指上滑 取消发送'\n            \t}\n            },\n            // 结束录音\n            voiceEnd(e){\n                console.log('voiceEnd：'+this.recording)\n            \tif(!this.recording){\n            \t\treturn;\n            \t}\n                \n            \tthis.recording = false;\n            \tthis.voiceTis='按住 说话';\n            \tthis.recordTis = '手指上滑 取消发送'\n            \tthis.RECORDER.stop();//录音结束\n                console.log('recordTis')\n            },\n            //录音结束(回调文件)\n            recordEnd(e){\n            \tclearInterval(this.recordTimer);\n            \tif(!this.willStop){\n            \t\t\n                    if(this.recordLength<2){\n                        uni.showToast({\n                            title: '录音时间太短',\n                            icon: \"none\",\n                            duration: 2000\n                        })\n                        return\n                    }\n                    \n                    uni.showLoading({\n                    \ttitle: '语音发送中'\n                    })\n                    var _self = this\n                    var uploadTask = uni.uploadFile({\n                    \turl: _self.uploadParams.url,\n                    \tfilePath: e.tempFilePath,\n                    \tname: 'userAvatar',\n                    \tformData: {\n                    \t\tpolicy: _self.uploadParams.policy,\n                    \t\tSignature: _self.uploadParams.Signature\n                    \t},\n                    \tsuccess(result) {\n                    \t\tif (result.data) {\n                                console.log(result.data);\n                    \t\t\tlet r = JSON.parse(result.data)\n                    \t\t\tif (r.status === 'OK') {\n                                    \n                                    let min = parseInt(_self.recordLength/60);\n                                    let sec = _self.recordLength%60;\n                                    min = min<10?'0'+min:min;\n                                    sec = sec<10?'0'+sec:sec;\n                                    console.log(\"e: \" + JSON.stringify(e));\n                                    let msg = {\n                                    \tlength:min+':'+sec,\n                                        url:r.data.location + r.data.filepath,\n                                        sec:min+':'+sec\n                                    }\n                                    \n                    \t\t\t\t_self.sendMsg(msg,'voice');\n                    \t\t\t} else {\n                    \t\t\t\tuni.showToast({\n                    \t\t\t\t\ttitle: r.message,\n                    \t\t\t\t\ticon: \"none\",\n                    \t\t\t\t\tduration: 2000\n                    \t\t\t\t})\n                    \t\t\t}\n                    \t\t}\n                    \t},\n                    \tfail() {\n                                \n                    \t},\n                    \tcomplete(res) {\n                    \t\tuni.hideLoading()\n                    \t\tif (res.statusCode !== 200) {\n                    \t\t\tuni.showToast({\n                    \t\t\t\ttitle: res.errMsg,\n                    \t\t\t\ticon: \"none\",\n                    \t\t\t\tduration: 2000\n                    \t\t\t})\n                    \t\t}\n                    \t}\n                    })\n                    \n            \t\t// this.sendMsg(msg,'voice');\n            \t}else{\n            \t\tconsole.log('取消发送录音');\n            \t}\n            \tthis.willStop = false;\n            },\n            \n            // 打开抽屉\n            openDrawer(){\n            \tthis.popupLayerClass = 'showLayer';\n            },\n            // 隐藏抽屉\n            hideDrawer(){\n            \tthis.popupLayerClass = '';\n            \tsetTimeout(()=>{\n            \t\tthis.hideMore = true;\n            \t\tthis.hideEmoji = true;\n            \t},150);\n            },\n            discard(){\n            \treturn;\n            }\n    \t}\n    }\n","import mod from \"-!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatRoom.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\soft\\\\HBuilderX.2.4.2.20191115.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatRoom.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}