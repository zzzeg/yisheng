(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/upload-report/upload-report"],{363:
/*!*********************************************************************************!*\
  !*** E:/yisheng/trunk/main.js?{"page":"pages%2Fupload-report%2Fupload-report"} ***!
  \*********************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";(function(t){o(/*! uni-pages */4);n(o(/*! vue */2));var e=n(o(/*! ./pages/upload-report/upload-report.vue */364));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},364:
/*!**************************************************************!*\
  !*** E:/yisheng/trunk/pages/upload-report/upload-report.vue ***!
  \**************************************************************/
/*! no static exports found */function(t,e,o){"use strict";o.r(e);var n=o(/*! ./upload-report.vue?vue&type=template&id=f76447ae& */365),i=o(/*! ./upload-report.vue?vue&type=script&lang=js& */367);for(var s in i)"default"!==s&&function(t){o.d(e,t,(function(){return i[t]}))}(s);o(/*! ./upload-report.vue?vue&type=style&index=0&lang=scss& */369);var a,r=o(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */22),c=Object(r["default"])(i["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],a);c.options.__file="E:/yisheng/trunk/pages/upload-report/upload-report.vue",e["default"]=c.exports},365:
/*!*********************************************************************************************!*\
  !*** E:/yisheng/trunk/pages/upload-report/upload-report.vue?vue&type=template&id=f76447ae& ***!
  \*********************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,o){"use strict";o.r(e);var n=o(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload-report.vue?vue&type=template&id=f76447ae& */366);o.d(e,"render",(function(){return n["render"]})),o.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]})),o.d(e,"recyclableRender",(function(){return n["recyclableRender"]})),o.d(e,"components",(function(){return n["components"]}))},366:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng/trunk/pages/upload-report/upload-report.vue?vue&type=template&id=f76447ae& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,o){"use strict";o.r(e),o.d(e,"render",(function(){return i})),o.d(e,"staticRenderFns",(function(){return a})),o.d(e,"recyclableRender",(function(){return s})),o.d(e,"components",(function(){return n}));var n={uniPopup:function(){return o.e(/*! import() | components/uni-popup/uni-popup */"components/uni-popup/uni-popup").then(o.bind(null,/*! @/components/uni-popup/uni-popup.vue */700))}},i=function(){var t=this,e=t.$createElement;t._self._c},s=!1,a=[];i._withStripped=!0},367:
/*!***************************************************************************************!*\
  !*** E:/yisheng/trunk/pages/upload-report/upload-report.vue?vue&type=script&lang=js& ***!
  \***************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";o.r(e);var n=o(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload-report.vue?vue&type=script&lang=js& */368),i=o.n(n);for(var s in n)"default"!==s&&function(t){o.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},368:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng/trunk/pages/upload-report/upload-report.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{reportName:"",imgList:[],uploadParams:null,imgsrc:"",type:"",deleteIndex:"",tipsValue:"请至少保留一张图片"}},onLoad:function(t){console.log(),this.type=t.type,this.id=t.id?t.id:"",this.init()},methods:{init:function(){var t=this,e={purpose:"useravatar"};if(this.$api.getUploadParams({data:e}).then((function(e){console.log("getUploadParams"),console.log(e),t.uploadParams=e.data})).catch((function(t){console.log(t)})),this.id)switch(this.type){case"doctorReport":this.findDoctorReport();break;case"checkupReport":this.findCheckupReport();break}},addImage:function(){var e=this;t.authorize({scope:"scope.camera",success:function(t){"authorize:ok"==t.errMsg&&(console.log("选择上传"),e.uploadReport())},fail:function(e){t.showToast({icon:"none",title:"请先允许小程序获取相机访问权限"})}})},deletePic:function(t,e){this.imgsrc=t,this.deleteIndex=e,this.$refs["deletetip"].open()},confirmDelete:function(){this.imgList.splice(this.deleteIndex,1),this.$refs["deletetip"].close()},cancel:function(){this.$refs["deletetip"].close()},uploadReport:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(o){var n=o.tempFilePaths;console.log(n),t.showLoading({title:"上传中..."}),t.uploadFile({url:e.uploadParams.url,filePath:n[0],name:"userAvatar",formData:{policy:e.uploadParams.policy,Signature:e.uploadParams.Signature},success:function(o){console.log(o);var n=JSON.parse(o.data);if(console.log(n.data),"OK"===n.status){var i=n.data.location+n.data.filepath;e.imgList.push({url:i}),t.hideLoading()}else t.showToast({title:o.message,icon:"none",duration:2e3})},fail:function(t){console.log(t)}})}})},submit:function(){return""==this.reportName?(this.tipsValue="报告名称不能为空",void this.$refs["showtip"].open()):this.imgList<1?(this.tipsValue="请至少保留一张图片",void this.$refs["showtip"].open()):void("doctorReport"==this.type?""!=this.id?this.updateDoctorReport():this.doctorReportAdd():""!=this.id?this.updateCheckupReport():this.checkupReportAdd())},confirm:function(){this.$refs["showtip"].close()},findDoctorReport:function(){var t=this;this.$api.findDoctorReport({id:this.id}).then((function(e){"OK"===e.status&&(t.imgList=JSON.parse(e.data.files),t.reportName=e.data.name)})).catch((function(t){console.log(t)}))},doctorReportAdd:function(){this.$api.doctorReportAdd({files:JSON.stringify(this.imgList),name:this.reportName}).then((function(e){console.log(e),"OK"===e.status&&t.navigateBack({delta:1})})).catch((function(t){console.log(t)}))},updateDoctorReport:function(){this.$api.updateDoctorReport({files:JSON.stringify(this.imgList),name:this.reportName,id:this.id}).then((function(e){console.log(e),"OK"===e.status&&t.navigateBack({delta:1})})).catch((function(t){console.log(t)}))},findCheckupReport:function(){var t=this;this.$api.findCheckupReport({id:this.id}).then((function(e){"OK"===e.status&&(t.imgList=JSON.parse(e.data.files),t.reportName=e.data.name)})).catch((function(t){console.log(t)}))},checkupReportAdd:function(){this.$api.checkupReportAdd({files:JSON.stringify(this.imgList),name:this.reportName}).then((function(e){console.log(e),"OK"===e.status&&t.navigateBack({delta:1})})).catch((function(t){console.log(t)}))},updateCheckupReport:function(){this.$api.updateCheckupReport({files:JSON.stringify(this.imgList),name:this.reportName,id:this.id}).then((function(e){console.log(e),"OK"===e.status&&t.navigateBack({delta:1})})).catch((function(t){console.log(t)}))}}};e.default=o}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},369:
/*!************************************************************************************************!*\
  !*** E:/yisheng/trunk/pages/upload-report/upload-report.vue?vue&type=style&index=0&lang=scss& ***!
  \************************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";o.r(e);var n=o(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload-report.vue?vue&type=style&index=0&lang=scss& */370),i=o.n(n);for(var s in n)"default"!==s&&function(t){o.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},370:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng/trunk/pages/upload-report/upload-report.vue?vue&type=style&index=0&lang=scss& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,o){}},[[363,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/upload-report/upload-report.js.map