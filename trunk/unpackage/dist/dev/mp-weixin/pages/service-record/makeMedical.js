(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/service-record/makeMedical"],{355:
/*!********************************************************************************!*\
  !*** E:/yisheng/trunk/main.js?{"page":"pages%2Fservice-record%2FmakeMedical"} ***!
  \********************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";(function(e){a(/*! uni-pages */4);s(a(/*! vue */2));var t=s(a(/*! ./pages/service-record/makeMedical.vue */356));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},356:
/*!*************************************************************!*\
  !*** E:/yisheng/trunk/pages/service-record/makeMedical.vue ***!
  \*************************************************************/
/*! no static exports found */function(e,t,a){"use strict";a.r(t);var s=a(/*! ./makeMedical.vue?vue&type=template&id=dc0d6556& */357),i=a(/*! ./makeMedical.vue?vue&type=script&lang=js& */359);for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a(/*! ./makeMedical.vue?vue&type=style&index=0&lang=css& */361);var n,o=a(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */22),c=Object(o["default"])(i["default"],s["render"],s["staticRenderFns"],!1,null,null,null,!1,s["components"],n);c.options.__file="E:/yisheng/trunk/pages/service-record/makeMedical.vue",t["default"]=c.exports},357:
/*!********************************************************************************************!*\
  !*** E:/yisheng/trunk/pages/service-record/makeMedical.vue?vue&type=template&id=dc0d6556& ***!
  \********************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,a){"use strict";a.r(t);var s=a(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./makeMedical.vue?vue&type=template&id=dc0d6556& */358);a.d(t,"render",(function(){return s["render"]})),a.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]})),a.d(t,"recyclableRender",(function(){return s["recyclableRender"]})),a.d(t,"components",(function(){return s["components"]}))},358:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng/trunk/pages/service-record/makeMedical.vue?vue&type=template&id=dc0d6556& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,a){"use strict";var s;a.r(t),a.d(t,"render",(function(){return i})),a.d(t,"staticRenderFns",(function(){return n})),a.d(t,"recyclableRender",(function(){return r})),a.d(t,"components",(function(){return s}));var i=function(){var e=this,t=e.$createElement;e._self._c},r=!1,n=[];i._withStripped=!0},359:
/*!**************************************************************************************!*\
  !*** E:/yisheng/trunk/pages/service-record/makeMedical.vue?vue&type=script&lang=js& ***!
  \**************************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";a.r(t);var s=a(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./makeMedical.vue?vue&type=script&lang=js& */360),i=a.n(s);for(var r in s)"default"!==r&&function(e){a.d(t,e,(function(){return s[e]}))}(r);t["default"]=i.a},360:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng/trunk/pages/service-record/makeMedical.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(/*! ../../common/util.js */28));function i(e){return e&&e.__esModule?e:{default:e}}var r=function(){a.e(/*! require.ensure | components/tale-calendar/tale-calendar */"components/tale-calendar/tale-calendar").then(function(){return resolve(a(/*! ../../components/tale-calendar/tale-calendar.vue */735))}.bind(null,a)).catch(a.oe)},n={components:{"v-calendar":r},data:function(){return{boxHeight:0,topHeight:0,mask:0,visible:!0,indicatorStyle:"height: ".concat(Math.round(e.getSystemInfoSync().screenWidth/7.5),"px;"),certificateTypes:["身份证","港澳通行证/护照"],showText:"#2A3441",time:{year:2020,month:5},extraData:[],hospId:null,reserveStatus:null,procudtId:null,orderId:null,kkPackage:"",kkHospName:"",makeTime:"请选择体检时间",name:null,cardNumber:null,cardType:0,contactTel:null,married:1,sex:null,tempType:0,reserveFormId:null,kkReserveId:null,isUpdate:!1,showSex:!1,backType:0}},onLoad:function(e){this.hospId=e.hospId,this.reserveStatus=e.reserveStatus,this.orderId=e.orderId,this.procudtId=e.procudtId,this.reserveFormId=e.reserveFormId,1==e.backType&&(this.backType=1),e.reserveFormId&&"null"!=e.reserveFormId?this.getKKReserve():(this.getKKHosp(),this.getKKPackage(),this.getHospitalDateService())},methods:{clickSex:function(e){this.sex=e},clickSubmit:function(){var t=this;if("请选择体检时间"!=this.makeTime)if("FAIL"==this.reserveStatus||this.isUpdate){if(null==this.kkReserveId)return;this.$api.updateKKReserve({data:{id:this.kkReserveId,checkupTime:this.makeTime},showHud:!0}).then((function(e){console.log(e),"OK"==e.status&&t.getKKReserve()}))}else{if(null==this.name)return void e.showToast({title:"请输入体检人姓名",icon:"none",duration:2e3});if(null==this.cardNumber)return void e.showToast({title:"请输入证件号码",icon:"none",duration:2e3});if(null==this.sex)return void e.showToast({title:"请输入性别",icon:"none",duration:2e3});if(!s.default.checkIDCard(this.cardNumber)&&0==this.cardType)return void e.showToast({title:"请输入正确的证件号码",icon:"none",duration:2e3});if(null==this.contactTel)return void e.showToast({title:"请输入手机号码",icon:"none",duration:2e3});if(!s.default.verifyMobile(this.contactTel))return void e.showToast({title:"请输入正确的手机号码",icon:"none",duration:2e3});this.$api.addKKReserve({data:{cardNumber:this.cardNumber,cardType:this.cardType+1,checkupTime:this.makeTime,contactTel:this.contactTel,hospId:this.hospId,married:this.married,name:this.name,orderId:this.orderId,packageCode:this.procudtId,sex:this.sex}}).then((function(e){console.log(e),"OK"==e.status&&(t.reserveFormId=e.data.id,t.getKKReserve())}))}else e.showToast({title:"请选择体检时间",icon:"none",duration:2e3})},disposeKKReserveData:function(e){this.name=e.name,this.sex=e.sex,this.married=Number(e.married),this.contactTel=e.contactTel,this.cardNumber=e.cardNumber,this.cardType=e.cardType,this.kkReserveId=e.id,this.reserveStatus=e.status,"WAIT"==e.status&&(this.reserveStatus="null");var t=s.default.formatTimestamp(e.checkupTime,"yyyy-MM-dd");t=t.replace(/-/g,"");var a=new Date,i=a.getFullYear(),r=a.getMonth()+1;r=r<10?"0"+r:r;var n=a.getDate();n=n<10?"0"+n:n;var o=Number(i+r+n);"SUCCESS"!=this.reserveStatus&&"DOING"!=this.reserveStatus||(this.makeTime=t,console.log(Number(t)-Number(o)),Number(t)-o>2&&"SUCCESS"==this.reserveStatus&&(this.isUpdate=!0))},getKKReserve:function(){var e=this;this.$api.findByIdkkReserve({data:{id:this.reserveFormId}}).then((function(t){console.log(t),"OK"==t.status&&(e.getKKHosp(),e.getKKPackage(),e.getHospitalDateService(),e.disposeKKReserveData(t.data))}))},getKKHosp:function(){var e=this;this.$api.findByIdKKHospital({data:{hospId:this.hospId}}).then((function(t){"OK"==t.status&&(e.kkHospName=t.data.hospName)}))},getHospitalDateService:function(){var e=this;this.$api.getHospitalDateService({data:{hospId:this.hospId,packageCode:this.procudtId}}).then((function(t){"OK"==t.status&&t.data.forEach((function(t){if(console.log(Number(t.maxNum)-Number(t.usedNum)),Number(t.maxNum)-Number(t.usedNum)>0){var a={date:t.date,value:"可约",dot:!0,active:!0,textColor:"#03BE90"};e.extraData.push(a)}}))}))},getKKPackage:function(){var e=this;this.$api.findByKKPackage({data:{code:this.procudtId}}).then((function(t){console.log(t),"OK"==t.status&&(e.kkPackage=t.data,t.data.snapshot&&JSON.parse(t.data.snapshot)&&(e.kkPackage.icon=JSON.parse(t.data.snapshot).packageImage_0_thumb,e.kkPackage.sealPrice=JSON.parse(t.data.snapshot).sealPrice,e.kkPackage.packageSex=JSON.parse(t.data.snapshot).packageSex,0!=e.kkPackage.packageSex?e.sex=e.kkPackage.packageSex:e.showSex=!0))}))},bindChange:function(e){var t=e.detail.value;this.tempType=t[0],console.log(this.tempType)},clickSelectType:function(){this.cardType=this.tempType,this.mask=0,console.log(this.cardType)},calendarTap:function(e){console.log(e),this.makeTime=e.year+"-"+(Number(e.month)+1)+"-"+e.day,this.mask=0},clickMarried:function(e){"null"==this.reserveStatus&&(this.married=e)},clickType:function(){"SUCCESS"!=this.reserveStatus&&"DOING"!=this.reserveStatus&&(this.boxHeight="30%",this.topHeight="70%",this.mask=2)},clickTime:function(){(this.isUpdate||"FAIL"==this.reserveStatus||"null"==this.reserveStatus)&&(this.boxHeight="75%",this.topHeight="25%",this.mask=1)},clickClose:function(){this.mask=0}}};t.default=n}).call(this,a(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},361:
/*!**********************************************************************************************!*\
  !*** E:/yisheng/trunk/pages/service-record/makeMedical.vue?vue&type=style&index=0&lang=css& ***!
  \**********************************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";a.r(t);var s=a(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./makeMedical.vue?vue&type=style&index=0&lang=css& */362),i=a.n(s);for(var r in s)"default"!==r&&function(e){a.d(t,e,(function(){return s[e]}))}(r);t["default"]=i.a},362:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng/trunk/pages/service-record/makeMedical.vue?vue&type=style&index=0&lang=css& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,a){}},[[355,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/service-record/makeMedical.js.map