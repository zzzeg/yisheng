(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pay/confirm/confirm"],{179:
/*!***************************************************************************!*\
  !*** E:/yisheng/trunk/main.js?{"page":"pages%2Fpay%2Fconfirm%2Fconfirm"} ***!
  \***************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){n(/*! uni-pages */4);i(n(/*! vue */2));var e=i(n(/*! ./pages/pay/confirm/confirm.vue */180));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},180:
/*!******************************************************!*\
  !*** E:/yisheng/trunk/pages/pay/confirm/confirm.vue ***!
  \******************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! ./confirm.vue?vue&type=template&id=634ea4fc& */181),a=n(/*! ./confirm.vue?vue&type=script&lang=js& */183);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n(/*! ./confirm.vue?vue&type=style&index=0&lang=scss& */185);var o,r=n(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */22),c=Object(r["default"])(a["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],o);c.options.__file="E:/yisheng/trunk/pages/pay/confirm/confirm.vue",e["default"]=c.exports},181:
/*!*************************************************************************************!*\
  !*** E:/yisheng/trunk/pages/pay/confirm/confirm.vue?vue&type=template&id=634ea4fc& ***!
  \*************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./confirm.vue?vue&type=template&id=634ea4fc& */182);n.d(e,"render",(function(){return i["render"]})),n.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(e,"components",(function(){return i["components"]}))},182:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng/trunk/pages/pay/confirm/confirm.vue?vue&type=template&id=634ea4fc& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e),n.d(e,"render",(function(){return a})),n.d(e,"staticRenderFns",(function(){return o})),n.d(e,"recyclableRender",(function(){return s})),n.d(e,"components",(function(){return i}));var i={uniIcons:function(){return Promise.all(/*! import() | components/uni-icons/uni-icons */[n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(n.bind(null,/*! @/components/uni-icons/uni-icons.vue */617))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.buylist,(function(e,n){var i=t._f("toFixed")(e.price);return{$orig:t.__get_orig(e),f0:i}}))),i=t._f("toFixed")(t.goodsPrice);t.$mp.data=Object.assign({},{$root:{l0:n,f1:i}})},s=!1,o=[];a._withStripped=!0},183:
/*!*******************************************************************************!*\
  !*** E:/yisheng/trunk/pages/pay/confirm/confirm.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./confirm.vue?vue&type=script&lang=js& */184),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},184:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng/trunk/pages/pay/confirm/confirm.vue?vue&type=script&lang=js& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{type:"",buylist:[],payType:1,totalNum:0,total:0,goodsPrice:0,fee:0,addressData:{name:"",mobile:"",regions:"",provinceName:"",cityName:"",areaName:"",detailAddress:""},instanceId:"",activat:!1,isSubmit:!1}},computed:{communityId:function(){return this.$store.getters.communityId}},onLoad:function(e){var n=this;if(this.type=e.type,this.instanceId=e.instanceId?e.instanceId:"",e.webpid){var i=[],a={id:e.productId,image:e.url,title:e.name,price:e.price,number:1};i.push(a),t.setStorage({key:"buylist",data:i})}this.getPostFee(this.type),t.getStorage({key:"deliAddress",success:function(t){n.addressData=t.data,void 0!=n.addressData.name&&""!=n.addressData.name&&(console.log(n.addressData),n.activat=!0)}})},onShow:function(){var t=getCurrentPages(),e=t[t.length-1];void 0==e.data.addressData.name||""==e.data.selectedAddress||(this.addressData=e.data.addressData,void 0!=this.addressData.name&&""!=this.addressData.name&&(this.activat=!0))},methods:{calcTotal:function(){var e=this;t.getStorage({key:"buylist",success:function(t){e.buylist=t.data,e.goodsPrice=0;var n=e.buylist;n.forEach((function(t){console.log(t),e.goodsPrice+=t.price*t.number,e.totalNum+=t.number})),e.fee=e.minimum-e.goodsPrice>0?e.expenses:0,e.goodsPrice+=e.fee}})},getPostFee:function(t){var e=this;switch(t){case"doctor":this.expenses=0,this.minimum=0,this.calcTotal();break;case"community":this.$api.communityGetPostage().then((function(t){"OK"==t.status&&(t&&t.data&&t.data.expenses&&(e.expenses=t.data.expenses/100,e.minimum=t.data.minimum/100),e.calcTotal())})).catch((function(t){console.log(t)}));break;case"customer":this.$api.customerGetPostage().then((function(t){"OK"==t.status&&(t&&t.data&&t.data.expenses&&(e.expenses=t.data.expenses/100,e.minimum=t.data.minimum/100),e.calcTotal())})).catch((function(t){console.log(t)}));break}},clickJisuan:function(t,e){var n=this;if(1==t){if(this.buylist[e].number>1){this.buylist[e].number=this.buylist[e].number-1,this.totalNum=0;var i=0;this.buylist.forEach((function(t){i+=t.price*t.number,n.totalNum+=t.number})),this.fee=this.minimum-i>0?this.expenses:0,this.goodsPrice=i+this.fee}else if(this.buylist.length>1){this.buylist.splice(e,1),this.totalNum=0;i=0;this.buylist.forEach((function(t){i+=t.price*t.number,n.totalNum+=t.number})),this.fee=this.minimum-i>0?this.expenses:0,this.goodsPrice=i+this.fee}}else{this.buylist[e].number=this.buylist[e].number+1;i=0;this.totalNum=0,this.buylist.forEach((function(t){n.totalNum+=t.number,i+=t.price*t.number})),this.fee=this.minimum-i>0?this.expenses:0,this.goodsPrice=i+this.fee}},numberChange:function(t){this.number=t.number},changePayType:function(t){this.payType=t},onImageLoad:function(t,e){this.$set(this[t][e],"loaded","loaded")},onImageError:function(t,e){this[t][e].image="/static/healthy-mall/errorImage.jpg"},submit:function(){var e=this.addressData;if(""!=e.name){var n={provinceName:this.addressData.provinceName,cityName:this.addressData.cityName,areaName:this.addressData.areaName,address:this.addressData.detailAddress};if(n=JSON.stringify(n),"community"==this.type||"doctor"==this.type){var i=[];this.buylist.map((function(t){i.push({num:t.number,productId:t.id,type:t.productType?t.productType:"COMMUNITY_PRODUCT"})}));var a,s="MALL";if("doctor"==this.type?(s="DOCTOR",a={name:e.name,communityId:this.communityId,address:n,contcatPhone:e.mobile,items:i,source:"MINGWO",instanceId:this.instanceId,orderType:s}):a=""!=this.instanceId?{name:e.name,communityId:this.communityId,address:n,contcatPhone:e.mobile,items:i,source:"MINGWO",instanceId:this.instanceId}:{name:e.name,communityId:this.communityId,address:n,contcatPhone:e.mobile,items:i,source:"MINGWO",instanceId:this.instanceId,orderType:s},this.isSubmit)return;this.isSubmit=!0;var o=this;this.$api.constitutionOrderAddOrder(a).then((function(e){console.log(e),"OK"==e.status?t.requestPayment({provider:"wxpay",timeStamp:e.data.payInfo.timeStamp,nonceStr:e.data.payInfo.nonceStr,package:e.data.payInfo.packageValue,signType:"MD5",paySign:e.data.payInfo.sign,success:function(n){o.isSubmit=!1,t.navigateTo({url:"../../order-detail/order-detail?type=99&orderid="+e.data.id})},fail:function(t){console.log("fail:"+JSON.stringify(t)),o.isSubmit=!1}}):(o.isSubmit=!1,t.showToast({title:e.message,icon:"none"}))})).catch((function(t){console.log(t)}))}else"customer"==this.type&&this.$api.constitutionOrderAddOrder({name:e.name,address:n,contcatPhone:e.mobile,items:[],source:"MINGWO"}).then((function(e){console.log(e),"OK"==e.status?t.requestPayment({provider:"wxpay",timeStamp:e.data.payInfo.timeStamp,nonceStr:e.data.payInfo.nonceStr,package:e.data.payInfo.packageValue,signType:"MD5",paySign:e.data.payInfo.sign,success:function(n){t.navigateTo({url:"../../order-detail/order-detail?type=99&orderid="+e.data.id})},fail:function(t){console.log("fail:"+JSON.stringify(t))}}):t.showToast({title:e.message,icon:"none"})})).catch((function(t){console.log(t)}))}},stopPrevent:function(){}},filters:{toFixed:function(t){return t=parseFloat(t),t.toFixed(2)}}};e.default=n}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},185:
/*!****************************************************************************************!*\
  !*** E:/yisheng/trunk/pages/pay/confirm/confirm.vue?vue&type=style&index=0&lang=scss& ***!
  \****************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./confirm.vue?vue&type=style&index=0&lang=scss& */186),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},186:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng/trunk/pages/pay/confirm/confirm.vue?vue&type=style&index=0&lang=scss& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){}},[[179,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/pay/confirm/confirm.js.map