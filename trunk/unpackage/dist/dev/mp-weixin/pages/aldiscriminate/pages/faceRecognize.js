(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/aldiscriminate/pages/faceRecognize"],{516:
/*!******************************************************************************************!*\
  !*** E:/yisheng/trunk/main.js?{"page":"pages%2Faldiscriminate%2Fpages%2FfaceRecognize"} ***!
  \******************************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";(function(e){a(/*! uni-pages */4);n(a(/*! vue */2));var t=n(a(/*! ./pages/aldiscriminate/pages/faceRecognize.vue */517));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},517:
/*!*********************************************************************!*\
  !*** E:/yisheng/trunk/pages/aldiscriminate/pages/faceRecognize.vue ***!
  \*********************************************************************/
/*! no static exports found */function(e,t,a){"use strict";a.r(t);var n=a(/*! ./faceRecognize.vue?vue&type=template&id=42c24ef4& */518),o=a(/*! ./faceRecognize.vue?vue&type=script&lang=js& */520);for(var i in o)"default"!==i&&function(e){a.d(t,e,(function(){return o[e]}))}(i);a(/*! ./faceRecognize.vue?vue&type=style&index=0&lang=css& */522);var s,r=a(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */22),u=Object(r["default"])(o["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],s);u.options.__file="E:/yisheng/trunk/pages/aldiscriminate/pages/faceRecognize.vue",t["default"]=u.exports},518:
/*!****************************************************************************************************!*\
  !*** E:/yisheng/trunk/pages/aldiscriminate/pages/faceRecognize.vue?vue&type=template&id=42c24ef4& ***!
  \****************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./faceRecognize.vue?vue&type=template&id=42c24ef4& */519);a.d(t,"render",(function(){return n["render"]})),a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),a.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),a.d(t,"components",(function(){return n["components"]}))},519:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng/trunk/pages/aldiscriminate/pages/faceRecognize.vue?vue&type=template&id=42c24ef4& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,a){"use strict";var n;a.r(t),a.d(t,"render",(function(){return o})),a.d(t,"staticRenderFns",(function(){return s})),a.d(t,"recyclableRender",(function(){return i})),a.d(t,"components",(function(){return n}));var o=function(){var e=this,t=e.$createElement;e._self._c},i=!1,s=[];o._withStripped=!0},520:
/*!**********************************************************************************************!*\
  !*** E:/yisheng/trunk/pages/aldiscriminate/pages/faceRecognize.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./faceRecognize.vue?vue&type=script&lang=js& */521),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},521:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng/trunk/pages/aldiscriminate/pages/faceRecognize.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(/*! ../../../common/api.js */8));function o(e){return e&&e.__esModule?e:{default:e}}var i=e.getSystemInfoSync().statusBarHeight+44,s=e.getSystemInfoSync().screenWidth-e.upx2px(60),r={data:function(){return{statusBarHeight:i,windowHeight:0,animationBoxWidth:s,uploadParams:null,facePicTop:0,url:null,recognizeText:"分析中...",recognizeState:0,facepic:"",nextTitle:"下一步",type:0,ligulate:"",tongueColor:"",mossName:"",fissureStatus:"",mossColor:"",bodyfluidName:"",indentationStatus:"",prick:""}},onLoad:function(t){var a=this;this.windowHeight=e.getSystemInfoSync().windowHeight,this.animationBoxWidth=s;var o={purpose:"useravatar"};n.default.getUploadParams({data:o}).then((function(e){console.log("getUploadParams"),console.log(e),a.uploadParams=e.data})),console.log(t.url),this.url=t.url,this.type=t.type,2==this.type&&(this.nextTitle="完成")},methods:{clickNext:function(){if(this.uploadParams){this.recognizeState=1,e.showLoading({title:"图片上传中"});var t=this;e.uploadFile({url:this.uploadParams.url,filePath:this.url,name:"userAvatar",formData:{policy:this.uploadParams.policy,Signature:this.uploadParams.Signature},success:function(a){if(a.data){console.log(a.data);var n=JSON.parse(a.data);if("OK"===n.status){var o=n.data.location+n.data.filepath;t.recognize(o)}else e.showToast({title:n.message,icon:"none",duration:2e3})}},fail:function(){},complete:function(t){e.hideLoading(),200!==t.statusCode&&e.showToast({title:t.errMsg,icon:"none",duration:2e3})}})}else e.showToast({title:"getUploadParams failed!",icon:"none",duration:2e3})},clickDiscriminate:function(){var t=e.getStorageSync("AlInfo");if(0==this.type){var a={body:this.facepic},n={age:t.age,gender:t.gender,name:t.name,phone:t.phone,weight:t.weight,height:t.height,tongueImages:a};console.log(n),e.setStorageSync("AlInfo",n),e.navigateTo({url:"tongueFront"})}else if(1==this.type){a={body:t.tongueImages.body,front:this.facepic},n={age:t.age,gender:t.gender,name:t.name,phone:t.phone,weight:t.weight,height:t.height,tongueImages:a};console.log(n),e.setStorageSync("AlInfo",n),e.navigateTo({url:"tongueContrary"})}else if(2==this.type){a={body:t.tongueImages.body,front:t.tongueImages.front,back:this.facepic,flag:!1},n={age:t.age,gender:t.gender,name:t.name,phone:t.phone,weight:t.weight,height:t.height,tongueImages:a};console.log(n),e.setStorageSync("AlInfo",n),e.navigateBack({delta:6})}},clickBack:function(){e.navigateBack({delta:1})},recognizeResult:function(t){setTimeout(function(){var a=this,o={key:t};0==this.type?n.default.getFaceImageResult({data:o}).then((function(n){console.log(n),"OK"==n.status?(a.recognizeState=2,a.recognizeText="分析完成！"):"30000"==n.status?a.recognizeResult(t):(console.log("recognizeFailure"),e.navigateTo({url:"recognizeFailure?msg="+n.message}))})):n.default.getTongueBackImageResult({data:o}).then((function(n){console.log(n),"OK"==n.status?(a.recognizeState=2,a.recognizeText="分析完成！"):"30000"==n.status?a.recognizeResult(t):(console.log("recognizeFailure"),e.navigateTo({url:"recognizeFailure?msg="+n.message}))}))}.bind(this),5e3)},recognize:function(t){var a=this,o={url:t};0==this.type?n.default.analysisFaceImage({data:o}).then((function(n){console.log("analysisFaceImage"),console.log(n),"OK"===n.status?(a.facepic=t,a.recognizeResult(n.data.key)):(console.log("recognizeFailure"),e.navigateTo({url:"recognizeFailure"}))})):1==this.type?n.default.cutTongueImage({data:o}).then((function(n){if(console.log("analysisFaceImage"),console.log(n),"OK"===n.status){a.recognizeState=2,a.recognizeText="分析完成！",a.facepic=t,a.ligulate=n.data.ligulate,a.tongueColor=n.data.tongueColor,console.log(n.data.mossName);var o=JSON.parse(n.data.mossName);console.log(o),o&&o.length>0&&o.forEach((function(e,t){a.mossName=0==t?a.mossName+e:a.mossName+","+e})),n.data.fissureStatus?a.fissureStatus="有裂纹":a.fissureStatus="无裂纹",a.fissure=n.data.fissure,a.mossColor=n.data.mossColor,a.bodyfluidName=n.data.bodyfluidName,n.data.indentationStatus?a.indentationStatus="有齿痕":a.indentationStatus="无齿痕",n.data.prickStatus?a.prick="有刺点":a.prick="无刺点"}else console.log("recognizeFailure"),e.navigateTo({url:"recognizeFailure"})})):2==this.type&&n.default.cutTongueBackImage({data:o}).then((function(n){console.log("analysisFaceImage"),console.log(n),"OK"===n.status?(a.facepic=t,a.recognizeResult(n.data.key)):(console.log("recognizeFailure"),e.navigateTo({url:"recognizeFailure"}))}))}}};t.default=r}).call(this,a(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},522:
/*!******************************************************************************************************!*\
  !*** E:/yisheng/trunk/pages/aldiscriminate/pages/faceRecognize.vue?vue&type=style&index=0&lang=css& ***!
  \******************************************************************************************************/
/*! no static exports found */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./faceRecognize.vue?vue&type=style&index=0&lang=css& */523),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},523:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/yisheng/trunk/pages/aldiscriminate/pages/faceRecognize.vue?vue&type=style&index=0&lang=css& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,a){}},[[516,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/aldiscriminate/pages/faceRecognize.js.map