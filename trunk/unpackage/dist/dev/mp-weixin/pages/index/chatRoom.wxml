<view><view data-event-opts="{{[['touchstart',[['hideDrawer',['$event']]]]]}}" class="content" bindtouchstart="__e"><block wx:if="{{chatType!=1}}"><view class="hintBox"><view style="color:#FF5A5A;padding:10rpx 33rpx 10rpx 33rpx;">注意：急重症不适合网上问诊，请立即前往医院就诊</view><view style="color:#868E9D;padding:0rpx 33rpx;">您好，我们非常重视您的每一次问诊，问诊人数较多时，请您耐心等待，多谢理解！</view></view></block><scroll-view class="msg-list" style="{{(chatType==1?'top:0':'')}}" scroll-y="true" show-scrollbar="{{0}}" scroll-with-animation="{{scrollAnimation}}" scroll-top="{{scrollTop}}" scroll-into-view="{{scrollToView}}" upper-threshold="50" data-event-opts="{{[['scrolltoupper',[['loadHistory',['$event']]]]]}}" bindscrolltoupper="__e"><block wx:if="{{isHistoryLoading}}"><view class="loading"><view class="spinner"><view class="rect1"></view><view class="rect2"></view><view class="rect3"></view><view class="rect4"></view><view class="rect5"></view></view></view></block><block wx:for="{{msgList}}" wx:for-item="row" wx:for-index="index" wx:key="index"><view class="row" id="{{'msg'+row.msg.id}}"><block wx:if="{{row.type=='product'}}"><block><view data-event-opts="{{[['tap',[['clickProduct',['$0'],[[['msgList','',index,'msg.content.extContent']]]]]]]}}" class="my" bindtap="__e"><view class="left" style="background:#03BE90;width:326rpx;height:550rpx;padding:0rpx 32rpx;border-radius:30rpx;"><view style="border-radius:30rpx;background:#FFFFFF;width:100%;"><image style="width:100%;height:330rpx;border-radius:30rpx 30rpx 0 0;" src="{{row.msg.content.extContent.icon}}" mode="aspectFill"></image><view style="line-height:22px;margin:6rpx 20rpx 10rpx 20rpx;overflow:hidden;text-overflow:ellipsis;word-break:break-all;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;">{{''+(row.msg.content.extContent.name?row.msg.content.extContent.name:'')+''}}</view><block wx:if="{{row.msg.content.extContent.type!='GOODS'}}"><view style="line-height:1;margin:0 20rpx 0rpx 20rpx;color:#A0A8BC;font-size:21rpx;">{{''+row.msg.content.extContent.desc+''}}</view></block><view style="line-height:18px;margin:0 20rpx;color:#03BE90;display:flex;"><block wx:if="{{row.msg.content.extContent.type=='GOODS'}}"><text style="width:80rpx;font-size:21rpx;">{{''+row.msg.content.extContent.zhekou+'折'}}</text></block><text style="font-size:25rpx;">{{'￥'+row.msg.content.extContent.price+''}}</text></view><block wx:if="{{row.msg.content.extContent.type=='GOODS'}}"><view style="line-height:1;margin:0 20rpx 0rpx 20rpx;color:#A0A8BC;display:flex;"><text style="width:80rpx;font-size:21rpx;">原价</text><text style="font-size:23rpx;text-decoration:line-through;">{{"￥"+row.msg.content.extContent.originalPrice}}</text></view></block><view style="height:20rpx;width:100%;"></view></view></view><view class="right"><image src="{{row.msg.userinfo.face}}"></image></view></view></block></block><block wx:if="{{row.type=='suggest'}}"><block><view class="other"><view class="left"><image src="{{expertPics}}"></image></view><view class="right"><view data-event-opts="{{[['tap',[['clickReport',['$0'],[[['msgList','',index,'msg.content.extContent']]]]]]]}}" class="text bubble" style="line-height:1.2;" bindtap="__e"><text>健康调理报告已发送，请到<text style="color:#03BE90;">查看报告</text>里查看</text></view></view></view><view class="system"><view class="text" style="margin-top:20rpx;">本次问诊已完成</view></view></block></block><block wx:if="{{row.type=='system'}}"><block><view class="system"><block wx:if="{{row.msg.type=='text'}}"><view class="text">{{''+row.msg.content.text+''}}</view></block></view></block></block><block wx:if="{{row.type=='user'}}"><block><block wx:if="{{row.msg.userinfo.uid==myuid}}"><view class="my"><view class="left"><block wx:if="{{row.msg.type=='text'}}"><view class="bubble"><rich-text nodes="{{row.msg.content.text}}"></rich-text></view></block><block wx:if="{{row.msg.type=='voice'}}"><view data-event-opts="{{[['tap',[['playVoice',['$0'],[[['msgList','',index,'msg']]]]]]]}}" class="{{['bubble voice',playMsgid==row.msg.id?'play':'']}}" style="{{'width:'+(row.msg.content.length/60*70+15+'%')+';'}}" bindtap="__e"><view class="length">{{row.msg.content.length+'"'+''}}</view><view class="icon my-voice"></view></view></block><block wx:if="{{row.msg.type=='img'}}"><view data-event-opts="{{[['tap',[['showPic',['$0'],[[['msgList','',index,'msg']]]]]]]}}" class="bubble img" bindtap="__e"><image style="{{'width:'+(row.msg.content.w+'px')+';'+('height:'+(row.msg.content.h+'px')+';')}}" src="{{row.msg.content.url}}"></image></view></block></view><view class="right"><image src="{{row.msg.userinfo.face}}"></image></view></view></block><block wx:if="{{row.msg.userinfo.uid!=myuid}}"><view class="other"><view class="left"><image src="{{row.msg.userinfo.face}}"></image></view><view class="right"><block wx:if="{{row.msg.type=='text'}}"><view class="bubble"><rich-text nodes="{{row.msg.content.text}}"></rich-text></view></block><block wx:if="{{row.msg.type=='voice'}}"><view data-event-opts="{{[['tap',[['playVoice',['$0'],[[['msgList','',index,'msg']]]]]]]}}" class="{{['bubble voice',playMsgid==row.msg.id?'play':'']}}" bindtap="__e"><view class="icon other-voice"></view><view class="length">{{row.msg.content.length}}</view></view></block><block wx:if="{{row.msg.type=='img'}}"><view data-event-opts="{{[['tap',[['showPic',['$0'],[[['msgList','',index,'msg']]]]]]]}}" class="bubble img" bindtap="__e"><image style="{{'width:'+(row.msg.content.w+'px')+';'+('height:'+(row.msg.content.h+'px')+';')}}" src="{{row.msg.content.url}}"></image></view></block></view></view></block></block></block></view></block></scroll-view></view><block wx:if="{{isFinish!=1}}"><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['input-box',popupLayerClass]}}" catchtouchmove="__e"><view data-event-opts="{{[['tap',[['switchVoice',['$event']]]]]}}" class="picbox" bindtap="__e"><image class="img" src="{{jianpanicon}}" mode></image></view><view class="textbox"><view data-event-opts="{{[['touchstart',[['voiceBegin',['$event']]]],['touchmove',[['voiceIng',['$event']]]],['touchend',[['voiceEnd',['$event']]]],['touchcancel',[['voiceCancel',['$event']]]]]}}" class="{{['voice-mode',isVoice?'':'hidden',recording?'recording':'']}}" bindtouchstart="__e" catchtouchmove="__e" bindtouchend="__e" bindtouchcancel="__e">{{voiceTis}}</view><view class="{{['text-mode',isVoice?'hidden':'']}}"><view class="box"><block wx:if="{{showPlaceholder}}"><input style="width:100%;" placeholder-class="input-placeholder" auto-height="true" placeholder="请输入内容" confirm-type="send" data-event-opts="{{[['confirm',[['sendText',['$event']]]],['focus',[['textareaFocus',['$event']]]],['input',[['__set_model',['','textMsg','$event',[]]]]]]}}" value="{{textMsg}}" bindconfirm="__e" bindfocus="__e" bindinput="__e"/></block></view></view></view><view data-event-opts="{{[['tap',[['getImage',['album']]]]]}}" class="picbox" style="margin-left:20rpx;" bindtap="__e"><image class="img" src="../../static/image/icon_lt_fstp.png" mode></image></view></view></block><view class="{{['record',recording?'':'hidden']}}"><view class="{{['ing',willStop?'hidden':'']}}"><view class="icon luyin2"></view></view><view class="{{['cancel',willStop?'':'hidden']}}"><view class="icon chehui"></view></view><view class="{{['tis',willStop?'change':'']}}">{{recordTis}}</view></view></view>